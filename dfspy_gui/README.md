# DFSPy GUI 交互式数据处理软件

## 项目概述

本项目是 DFSPy (分布式光纤传感数据处理软件) 的 GUI 交互式版本，提供用户友好的图形界面来进行分布式光纤传感地震数据的处理。

## 项目结构

```
dfspy_gui/
├── main.py                          # 主程序入口
├── dfspy_mainwindow.py              # 主窗口模块
├── dfspy_subwindow_formatc.py       # 格式转换子窗口
├── dfspy_subwindow_compress.py      # 数据压缩子窗口
├── dfspy_subwindow_denoise.py       # 数据降噪子窗口
├── dfspy_subwindow_parac.py         # 参量转换子窗口
├── imag_qrc_rc.py                   # 图标资源文件
├── image/                           # 图标图片文件夹
│   ├── 图片1.png                    # 压缩图标
│   ├── 图片2.png                    # 格式转换图标
│   ├── 图片3.png                    # 参量转换图标
│   ├── 图片4.png                    # 降噪图标
│   ├── open.png                     # 打开文件图标
│   ├── plot.png                     # 绘图图标
│   ├── save.png                     # 保存图标
│   └── Exit.png                     # 退出图标
└── test_import.py                   # 导入测试脚本
```

## 功能特性

### 主窗口 (dfspy_mainwindow.py)
- 提供四个功能模块的入口按钮
- 美观的界面设计，保持与原版一致的样式
- 菜单栏包含设置和帮助选项

### 1. 格式转换 (dfspy_subwindow_formatc.py)
**功能：** 支持多种地震数据格式之间的相互转换
- **支持格式：** txt, SAC, MSEED, SEG-Y
- **特性：**
  - 批量文件处理
  - 头文件支持 (txt → SAC/MSEED 转换时需要)
  - 多线程处理，避免界面冻结
  - 实时状态反馈

### 2. 数据压缩 (dfspy_subwindow_compress.py)
**功能：** 小波变换数据压缩与重构
- **压缩方法：**
  - FWT (Fast Wavelet Transform) 标准压缩
  - 改进的 FWT 压缩 (自适应小波选择)
  - FWT 数据重构
- **特性：**
  - 压缩前后数据可视化对比
  - 压缩比和信噪比显示
  - 支持多种小波类型

### 3. 数据降噪 (dfspy_subwindow_denoise.py)
**功能：** 多种降噪算法
- **降噪方法：**
  - 带通滤波
  - 小波降噪
  - 相关降噪
  - 谱减法降噪
- **特性：**
  - 降噪前后对比显示
  - 参数可调
  - 实时参数说明

### 4. 参量转换 (dfspy_subwindow_parac.py)
**功能：** 应变到速度的参量转换
- **转换公式：** velocity = strain × apparent_velocity / normalize_divisor
- **特性：**
  - 可调视速度和归一化因子
  - 转换前后数据对比
  - 参数说明和默认值

## 技术架构

### 设计原则
1. **模块化设计：** 每个子窗口独立模块，便于维护
2. **底层函数分离：** 使用 `dfspy_cores.py` 作为数据处理核心
3. **多线程处理：** 避免长时间计算阻塞 UI
4. **用户友好：** 丰富的提示信息和错误处理

### 依赖关系
```
GUI 层 (PyQt5)
    ↓
dfspy_cores.py (数据处理核心)
    ↓
第三方库 (numpy, matplotlib, obspy, pywt)
```

### 核心技术
- **GUI 框架：** PyQt5
- **绘图：** Matplotlib + Qt 后端
- **多线程：** QThread
- **数据处理：** 基于 dfspy_cores.py

## 使用说明

### 安装依赖
```bash
pip install PyQt5 matplotlib numpy obspy pywt
```

### 运行程序
```bash
cd dfspy_gui
python main.py
```

### 操作流程
1. **启动程序：** 运行 main.py 打开主窗口
2. **选择功能：** 点击主窗口对应按钮进入子窗口
3. **导入数据：** 使用"导入数据"按钮选择文件
4. **设置参数：** 根据需要调整处理参数
5. **执行处理：** 点击"开始处理"按钮
6. **查看结果：** 通过可视化查看处理结果

## 新特性 (相比原版)

### 架构改进
1. **代码分离：** GUI 代码与数据处理逻辑完全分离
2. **模块化：** 每个子窗口独立文件，便于维护
3. **多线程：** 防止长时间处理导致界面冻结
4. **错误处理：** 完善的异常捕获和用户提示

### 功能增强
1. **文件选择：** 统一的文件选择对话框
2. **进度反馈：** 处理状态实时显示
3. **参数验证：** 输入参数有效性检查
4. **结果展示：** 处理结果详细信息显示

### 用户体验
1. **响应式界面：** 多线程确保界面始终响应
2. **丰富提示：** 详细的操作说明和错误信息
3. **一致性：** 保持与原版界面风格一致
4. **便捷性：** 简化的操作流程

## 开发信息

- **开发语言：** Python 3.9+
- **GUI 框架：** PyQt5
- **软件名称：** 分布式光纤传感地震数据处理软件 [DFSPy] V1.0
- **著作权人：** 中国科学院半导体研究所
- **软件著作权登记号：** 2025SR0353448

## 注意事项

1. **文件路径：** 确保文件路径不包含特殊字符
2. **内存使用：** 大文件处理时注意内存占用
3. **格式兼容：** 某些格式转换需要头文件
4. **参数设置：** 根据数据特性调整处理参数

## 故障排除

### 常见问题
1. **导入错误：** 检查依赖库是否正确安装
2. **文件无法打开：** 检查文件格式和权限
3. **处理失败：** 查看错误提示调整参数
4. **界面显示问题：** 检查 PyQt5 安装是否完整

### 调试方法
1. 查看控制台输出
2. 使用 test_import.py 测试模块导入
3. 检查 dfspy_cores.py 是否在正确位置
4. 确认所需图标文件存在

---

**版权声明：** 本软件为中国科学院半导体研究所开发的开源科研工具，仅供学术研究与非商业用途。